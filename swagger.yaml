openapi: 3.0.0
info:
  title: CommonGround API
  description: A simple API example
  version: 1.0.0
servers:
  - url: https://your-api-server.com
paths:
  /api/issues:
    get:
      summary: List issues
      description: This endpoint returns all issues
      operationId: getIssues
      tags:
        - Issue
      parameters:
        - name: sort
          in: query
          default: createAt,asc
          schema:
            type: string
        - name: page
          in: query
          default: 5
          schema:
            type: number
        - name: size
          in: query
          default: 5
          schema:
            type: number
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  content:
                    type: array
                    items:
                      id:
                        type: string
                        format: uuid
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                        description: The last time the issue title, description, or insight was updated
                      title:
                        type: string
                      description:
                        type: string
                  page:
                    type: object
                    properties:
                      size:
                        type: number
                      totalElement:
                        type: number
                      totalPage:
                        type: number
                      number:
                        type: number
    post:
      summary: Create a new issue
      description: This endpoint is used to create a new an issue
      operationId: createIssue
      tags:
        - Issue
        - Admin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                description:
                  type: string
                insight:
                  type: string
                  description: It should usually be generated by the AI Team's service, but can be
                    manually set by the admin
                  example: "[San Francisco, CA](0) — In a significant leap forward for electric
                    vehicle (EV) technology, researchers at [GreenTech
                    Innovations](1) announced today the development of a [new
                    battery](1,2) that could revolutionize the industry"
                facts:
                  type: array
                  description: List of fact referenced by issue's insight
                  example:
                    - f1b1b1b1-b1b1-b1b1-b1b1-b1b1b1b1b1b1
                    - f2b2b2b2-b2b2-b2b2-b2b2-b2b2b2b2b2
                    - f3b3b3b3-b3b3-b3b3-b3b3-b3b3b3b3b3
                  items:
                    type: string
                    format: uuid
              required:
                - title
                - description
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                  createdAt:
                    type: string
                    format: date-time
                  updatedAt:
                    type: string
                    format: date-time
                    description: The last time the issue title, description, or insight was updated
                  title:
                    type: string
                  description:
                    type: string
                  insight:
                    type: string
                    example: "[San Francisco, CA](0) — In a significant leap forward for electric
                      vehicle (EV) technology, researchers at [GreenTech
                      Innovations](1) announced today the development of a [new
                      battery](1,2) that could revolutionize the industry"
                  authorId:
                    type: string
                    format: uuid
                  authorName:
                    type: string
                  authorAvatar:
                    type: string
                    format: uri
                  facts:
                    type: array
                    description: List of fact referenced by issue's insight, displayed in the
                      insight link as the position starting from 0 in the list
                    items:
                      $ref: "#/components/schemas/Issue/properties/facts/items"
  "/api/issue/{id}":
    get:
      summary: Get an issue
      description: This endpoint returns an issue
      operationId: getIssue
      tags:
        - Issue
      parameters:
        - name: id
          in: path
          required: true
          description: The unique identifier of the issue
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/paths/~1api~1issues/post/responses/200/content/application~1json/schem\
                  a"
    put:
      summary: Update an issue
      description: This endpoint is used to update an issue
      operationId: updateIssue
      tags:
        - Issue
        - Admin
      parameters:
        - name: id
          in: path
          required: true
          description: The unique identifier of the issue
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/paths/~1api~1issues/post/requestBody/content/application~1json/schema"
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/paths/~1api~1issues/post/responses/200/content/application~1json/schem\
                  a"
    delete:
      summary: Delete an issue
      description: This endpoint is used to delete an issue
      operationId: deleteIssue
      tags:
        - Issue
        - Admin
      parameters:
        - name: id
          in: path
          required: true
          description: The unique identifier of the issue
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: No content
  "/api/issue/{id}/facts":
    get:
      summary: List facts of viewpoints used in the issue
      description: This endpoint returns all facts of viewpoints used in the issue
      operationId: getIssueFacts
      tags:
        - Issue
      parameters:
        - name: id
          in: path
          required: true
          description: The unique identifier of the issue
          schema:
            type: string
            format: uuid
        - $ref: "#/paths/~1api~1issues/get/parameters/0"
        - $ref: "#/paths/~1api~1issues/get/parameters/1"
        - $ref: "#/paths/~1api~1issues/get/parameters/2"
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  content:
                    type: array
                    items:
                      $ref: "#/components/schemas/Issue/properties/facts/items"
                  page:
                    $ref: "#/paths/~1api~1issues/get/responses/200/content/application~1json/schema\
                      /properties/page"
    post:
      summary: Add a fact to the issue
      description: This endpoint is used to add a fact to the issue
      operationId: addIssueFact
      tags:
        - Issue
      parameters:
        - name: id
          in: path
          required: true
          description: The unique identifier of the issue
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                factIds:
                  type: array
                  items:
                    type: string
                    format: uuid
                    description: The unique identifier of the fact
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Issue/properties/facts/items"
  "/api/issue/{id}/viewpoints":
    get:
      summary: List viewpoints
      description: This endpoint returns all viewpoints of an issue
      operationId: getViewpointsByIssue
      tags:
        - Issue
      parameters:
        - name: id
          in: path
          required: true
          description: The uuid of specific resource
          schema:
            type: string
            format: uuid
        - $ref: "#/paths/~1api~1issues/get/parameters/0"
        - $ref: "#/paths/~1api~1issues/get/parameters/1"
        - $ref: "#/paths/~1api~1issues/get/parameters/2"
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  content:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                          description: The unique identifier of the ViewPoint
                        createdAt:
                          type: string
                          format: date-time
                          description: The date and time the ViewPoint was created
                        updatedAt:
                          type: string
                          format: date-time
                          description: The date and time the ViewPoint was last updated
                        title:
                          type: string
                          description: The name of the ViewPoint
                        content:
                          type: string
                          description: The content of the ViewPoint
                        authorId:
                          type: string
                          format: uuid
                          description: The unique identifier of the author of the ViewPoint
                        authorName:
                          type: string
                          description: The name of the author of the ViewPoint
                        authorAvatar:
                          type: string
                          format: uri
                        userReaction:
                          type: object
                          properties:
                            reaction:
                              type: string
                              description: The reaction of the user
                              format: enum
                              enum:
                                - NONE
                                - LIKE
                                - REASONABLE
                                - DISLIKE
                        likeCount:
                          type: integer
                          description: The number of likes the ViewPoint has
                        reasonableCount:
                          type: integer
                          description: The number of resonables the ViewPoint has
                        dislikeCount:
                          type: integer
                          description: The number of dislikes the ViewPoint has
                        facts:
                          type: array
                          items:
                            $ref: "#/components/schemas/Issue/properties/facts/items"
                  page:
                    $ref: "#/paths/~1api~1issues/get/responses/200/content/application~1json/schema\
                      /properties/page"
    post:
      summary: Create a new viewpoint
      description: This endpoint is used to create a new viewpoint for an issue
      operationId: createViewPoint
      tags:
        - Issue
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: The name of the ViewPoint
                content:
                  type: string
                  description: The content of the ViewPoint
                facts:
                  type: array
                  items:
                    type: string
                    format: uuid
                    description: The unique identifier of the fact
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/responses/200/content/app\
                  lication~1json/schema/properties/content/items"
  /api/viewpoints:
    get:
      summary: List viewpoints
      description: This endpoint returns all viewpoints
      operationId: getViewPoints
      tags:
        - ViewPoint
      parameters:
        - $ref: "#/paths/~1api~1issues/get/parameters/0"
        - $ref: "#/paths/~1api~1issues/get/parameters/1"
        - $ref: "#/paths/~1api~1issues/get/parameters/2"
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  content:
                    type: array
                    items:
                      $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/responses/200/content/app\
                        lication~1json/schema/properties/content/items"
                  page:
                    $ref: "#/paths/~1api~1issues/get/responses/200/content/application~1json/schema\
                      /properties/page"
  "/api/viewpoint/{id}":
    get:
      summary: Get specific viewpoint information
      description: This endpoint returns specific viewpoint information by viewpoint id
      operationId: getViewPoint
      tags:
        - ViewPoint
      parameters:
        - $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/parameters/0"
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/responses/200/content/app\
                  lication~1json/schema/properties/content/items"
    put:
      summary: Update a viewpoint
      description: This endpoint is used to update a viewpoint
      operationId: updateViewPoint
      tags:
        - ViewPoint
      parameters:
        - $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/parameters/0"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/post/requestBody/content/appl\
                ication~1json/schema"
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/responses/200/content/app\
                  lication~1json/schema/properties/content/items"
    delete:
      summary: Delete a viewpoint
      description: This endpoint is used to delete a viewpoint
      operationId: deleteViewPoint
      tags:
        - ViewPoint
      parameters:
        - $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/parameters/0"
      responses:
        "204":
          description: No content
  "/api/viewpoint/{id}/reaction/me":
    post:
      summary: React to a viewpoint
      description: This endpoint is used to react to a viewpoint
      operationId: reactToViewPoint
      tags:
        - ViewPoint
      parameters:
        - $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/parameters/0"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                reaction:
                  type: string
                  description: The reaction of the user
                  format: enum
                  enum:
                    - NONE
                    - LIKE
                    - REASONABLE
                    - DISLIKE
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/paths/~1api~1viewpoint~1%7Bid%7D~1reaction~1me/post/requestBody/conten\
                  t/application~1json/schema"
  "/api/viewpoint/{id}/facts":
    get:
      summary: List facts of a viewpoint
      description: This endpoint returns all facts of a viewpoint
      operationId: getFactsOfViewPoint
      tags:
        - ViewPoint
      parameters:
        - $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/parameters/0"
        - $ref: "#/paths/~1api~1issues/get/parameters/1"
        - $ref: "#/paths/~1api~1issues/get/parameters/2"
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  content:
                    type: array
                    items:
                      $ref: "#/components/schemas/Issue/properties/facts/items"
                  page:
                    $ref: "#/paths/~1api~1issues/get/responses/200/content/application~1json/schema\
                      /properties/page"
    post:
      summary: Add a fact to a viewpoint
      description: This endpoint is used to add a fact to a viewpoint
      operationId: addFactToViewPoint
      tags:
        - ViewPoint
      parameters:
        - $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/parameters/0"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                factId:
                  type: string
                  format: uuid
      responses:
        "204":
          description: No content
  "/api/viewpoint/{id}/fact/{factId}":
    delete:
      summary: Unlink a fact from a viewpoint
      description: This endpoint is used to remove a fact from a viewpoint
      operationId: removeFactFromViewPoint
      tags:
        - ViewPoint
      parameters:
        - $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/parameters/0"
        - name: factId
          in: path
          required: true
          description: The uuid of fact
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: No content
  /api/facts:
    get:
      summary: List facts
      description: This endpoint returns all facts
      operationId: getFactsList
      tags:
        - Fact
      parameters:
        - $ref: "#/paths/~1api~1issues/get/parameters/0"
        - $ref: "#/paths/~1api~1issues/get/parameters/1"
        - $ref: "#/paths/~1api~1issues/get/parameters/2"
        - name: search
          in: query
          nullable: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  content:
                    type: array
                    items:
                      $ref: "#/components/schemas/Issue/properties/facts/items"
                  page:
                    $ref: "#/paths/~1api~1issues/get/responses/200/content/application~1json/schema\
                      /properties/page"
    post:
      summary: Create a new fact
      description: This endpoint is used to create a new fact for user
      operationId: createFact
      tags:
        - Fact
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                references:
                  type: array
                  items:
                    $ref: "#/components/schemas/UpdateFact/properties/references/items"
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Issue/properties/facts/items"
  "/api/fact/{id}":
    get:
      summary: Get specific fact information
      description: This endpoint returns specific fact information by fact id
      operationId: getFact
      tags:
        - Fact
      parameters:
        - $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/parameters/0"
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Issue/properties/facts/items"
        "404":
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  status:
                    type: number
                  title:
                    type: string
                  detail:
                    type: string
                  instance:
                    type: string
    put:
      summary: Update properties for a selected fact
      description: This endpoint is used to update properties of specific fact by fact id
      operationId: updateFact
      tags:
        - Fact
      parameters:
        - $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/parameters/0"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/paths/~1api~1facts/post/requestBody/content/application~1json/schema"
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Issue/properties/facts/items"
    delete:
      summary: Delete selected fact
      description: This endpoint is used to delete specific fact by fact id
      operationId: deletedFact
      tags:
        - Fact
      parameters:
        - $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/parameters/0"
      responses:
        "204":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  detailMessage:
                    type: string
  "/api/fact/{id}/references":
    get:
      summary: List references of specific fact
      description: This endpoint returns references of specific fact by fact id
      operationId: getReferencesOfFact
      tags:
        - Fact
      parameters:
        - $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/parameters/0"
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Fact/properties/references/items"
    post:
      summary: Add references to specific fact
      description: This endpoint is used to add new reference to specific fact by fact id
      operationId: addReferences
      tags:
        - Fact
      parameters:
        - $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/parameters/0"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  url:
                    type: string
                    format: uri
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Fact/properties/references/items"
  "/api/fact/{id}/reference/{referenceId}":
    delete:
      summary: Delete selected reference
      description: This endpoint is used to delete specific reference by reference id
      operationId: deleteReference
      tags:
        - Fact
      parameters:
        - $ref: "#/paths/~1api~1issue~1%7Bid%7D~1viewpoints/get/parameters/0"
        - name: referenceId
          in: path
          required: true
          description: The uuid of specific reference
          schema:
            type: string
            format: uuid
      responses:
        "204":
          $ref: "#/paths/~1api~1fact~1%7Bid%7D/delete/responses/204"
components:
  schemas:
    Issue:
      type: object
      properties:
        id:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
          description: The last time the issue title, description, or insight was updated
        title:
          type: string
        description:
          type: string
        insight:
          type: string
          example: "[San Francisco, CA](0) — In a significant leap forward for electric
            vehicle (EV) technology, researchers at [GreenTech Innovations](1)
            announced today the development of a [new battery](1,2) that could
            revolutionize the industry"
        authorId:
          type: string
          format: uuid
        authorName:
          type: string
        authorAvatar:
          type: string
          format: uri
        facts:
          type: array
          description: List of fact referenced by issue's insight, displayed in the
            insight link as the position starting from 0 in the list
          items:
            type: object
            properties:
              id:
                type: string
                format: uuid
              createdAt:
                type: string
                format: date-time
              updatedAt:
                type: string
                format: date-time
              title:
                type: string
              authorId:
                type: string
                format: uuid
              authorName:
                type: string
              authorAvatar:
                type: string
                format: uri
              references:
                type: array
                items:
                  $ref: "#/components/schemas/Fact/properties/references/items"
    UpdateIssue:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        insight:
          type: string
          description: It should usually be generated by the AI Team's service, but can be
            manually set by the admin
          example: "[San Francisco, CA](0) — In a significant leap forward for electric
            vehicle (EV) technology, researchers at [GreenTech Innovations](1)
            announced today the development of a [new battery](1,2) that could
            revolutionize the industry"
        facts:
          type: array
          description: List of fact referenced by issue's insight
          example:
            - f1b1b1b1-b1b1-b1b1-b1b1-b1b1b1b1b1b1
            - f2b2b2b2-b2b2-b2b2-b2b2-b2b2b2b2b2
            - f3b3b3b3-b3b3-b3b3-b3b3-b3b3b3b3b3
          items:
            type: string
            format: uuid
      required:
        - title
        - description
    IssueFacts:
      type: object
      properties:
        facts:
          type: array
          items:
            $ref: "#/components/schemas/Issue/properties/facts/items"
    ViewPoint:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: The unique identifier of the ViewPoint
        createdAt:
          type: string
          format: date-time
          description: The date and time the ViewPoint was created
        updatedAt:
          type: string
          format: date-time
          description: The date and time the ViewPoint was last updated
        title:
          type: string
          description: The name of the ViewPoint
        content:
          type: string
          description: The content of the ViewPoint
        authorId:
          type: string
          format: uuid
          description: The unique identifier of the author of the ViewPoint
        authorName:
          type: string
          description: The name of the author of the ViewPoint
        authorAvatar:
          type: string
          format: uri
        userReaction:
          type: object
          properties:
            reaction:
              type: string
              description: The reaction of the user
              format: enum
              enum:
                - NONE
                - LIKE
                - REASONABLE
                - DISLIKE
        likeCount:
          type: integer
          description: The number of likes the ViewPoint has
        reasonableCount:
          type: integer
          description: The number of resonables the ViewPoint has
        dislikeCount:
          type: integer
          description: The number of dislikes the ViewPoint has
        facts:
          type: array
          items:
            $ref: "#/components/schemas/Issue/properties/facts/items"
    UpdateViewPoint:
      type: object
      properties:
        title:
          type: string
          description: The name of the ViewPoint
        content:
          type: string
          description: The content of the ViewPoint
        facts:
          type: array
          items:
            type: string
            format: uuid
            description: The unique identifier of the fact
    ViewPointReaction:
      type: object
      properties:
        reaction:
          type: string
          description: The reaction of the user
          format: enum
          enum:
            - NONE
            - LIKE
            - REASONABLE
            - DISLIKE
    Fact:
      type: object
      properties:
        id:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        title:
          type: string
        authorId:
          type: string
          format: uuid
        authorName:
          type: string
        authorAvatar:
          type: string
          format: uri
        references:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                format: uuid
              createdAt:
                type: string
                format: date-time
              url:
                type: string
                format: uri
              icon:
                type: string
                format: byte
              title:
                type: string
    UpdateFact:
      type: object
      properties:
        title:
          type: string
        references:
          type: array
          items:
            type: object
            properties:
              url:
                type: string
                format: uri
    Reference:
      type: object
      properties:
        id:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        url:
          type: string
          format: uri
        icon:
          type: string
          format: byte
        title:
          type: string
    UpdateReference:
      type: object
      properties:
        url:
          type: string
          format: uri
    Pagination:
      type: object
      properties:
        size:
          type: number
        totalElement:
          type: number
        totalPage:
          type: number
        number:
          type: number
